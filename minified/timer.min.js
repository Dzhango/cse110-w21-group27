let currentTaskId,allTasks,distractCounter=0;window.onload=function(){const a=JSON.parse(localStorage.getItem("currentTask"));allTasks=JSON.parse(localStorage.getItem("allTasks"));for(let b=0;b<allTasks.length;b++)allTasks[b].id===a&&(currentTaskId=b,document.getElementById("currTask").innerHTML=allTasks[currentTaskId].name);"true"==localStorage.getItem("ShortBreak")?(document.getElementById("shortBreakModal").style.display="none",document.body.style.backgroundImage="linear-gradient(to right,#74EBD5,#ACB6E5)",document.getElementById("currTask").innerHTML="Short Break",document.getElementById("button-container").style.display="none",start(0,3)):"true"==localStorage.getItem("LongBreak")?(document.getElementById("longBreakModal").style.display="none",document.body.style.backgroundImage="linear-gradient(to right,#ACB6E5,#74EBD5)",document.getElementById("currTask").innerHTML="Long Break",document.getElementById("button-container").style.display="none",start(0,5)):(localStorage.setItem("isPomo","false"),document.getElementById("minutes").innerHTML="01",document.getElementById("seconds").innerHTML="00",document.getElementById("distraction-btn").innerHTML="Distraction : "+distractCounter,document.getElementById("title_timer").innerHTML="01:00- Time To Work!",start(0,3))};function start(a,b){function c(){--a,document.getElementById("minutes").innerHTML=10>a?"0"+a:a}function d(){if(--b,++e,perc=100-100*((f-e)/f),setProgress(perc),!(10>b))document.getElementById("seconds").innerHTML=b,document.getElementById("title_timer").innerHTML=a+":"+b+"- Time To Work!";else if(document.getElementById("seconds").innerHTML="0"+b,document.getElementById("title_timer").innerHTML=a+":0"+b+"- Time To Work!",0==b){if(0>=a){clearInterval(g),clearInterval(h),resetProgressRing();let a=+localStorage.getItem("sessionCounter");++a,console.log(a);let b=localStorage.getItem("isPomo");console.log(b),"true"==b?(localStorage.setItem("isPomo","false"),displayBreakComplete()):(localStorage.setItem("isPomo","true"),0==a%4?(localStorage.setItem("sessionCounter",a),localStorage.setItem("LongBreak","true"),displayLongBreak()):(localStorage.setItem("sessionCounter",a),localStorage.setItem("ShortBreak","true"),displayShortBreak()),allTasks[currentTaskId].current+=1,localStorage.setItem("allTasks",JSON.stringify(allTasks)))}b=60}}localStorage.setItem("ShortBreak","false"),localStorage.setItem("LongBreak","false"),distractCounter=0,document.getElementById("distraction-btn").innerHTML="Distraction : "+distractCounter;let e=0,f=60*(a+1);document.getElementById("minutes").innerHTML=10>a?"0"+a:a,10>b?(document.getElementById("seconds").innerHTML="0"+b,document.getElementById("title_timer").innerHTML=a+":0"+b+"- Time To Work!"):(document.getElementById("seconds").innerHTML=b,document.getElementById("title_timer").innerHTML=a+":"+b+"- Time To Work!");var g=setInterval(c,6e4),h=setInterval(d,1e3);++e,perc=100-100*((f-e)/f),setProgress(perc)}function distractionCount(){++distractCounter,document.getElementById("distraction-btn").innerHTML="Distraction : "+distractCounter}function displayFailModal(){document.getElementById("failModal").style.display="block"}function failSession(){document.getElementById("failModal").style.display="none",window.location.href="../index.html"}function quitFailModal(){document.getElementById("failModal").style.display="none"}