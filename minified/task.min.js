let allTasks,dropzone;class TaskList extends HTMLElement{constructor(){super();const a=this.attachShadow({mode:"open"});a.innerHTML=`<link rel="stylesheet" href="task.css"/>
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous"/>`}connectedCallback(){const a=document.createElement("ul");a.setAttribute("id","main-list"),a.setAttribute("class","task-container d-flex"),this.shadowRoot.append(a);const b=localStorage.getItem("allTasks");if(!b||"undefined"===b)allTasks=[];else{allTasks=JSON.parse(b),0!==allTasks.length&&document.getElementById("welcome-message").remove();for(let a=0;a<allTasks.length;a++)this.renderTask(allTasks[a])}dropzone=this.shadowRoot.querySelector("ul")}renderTask(a){const b=document.createElement("task-item");b.setAttribute("id",a.id),b.name=a.name,b.current=a.current,b.number=a.number,b.setFunctions(showModalTask,editTask,deleteTask,setCheck),this.shadowRoot.querySelector("ul").appendChild(b),this.shadowRoot.getElementById(a.id).checkmark.checked=a.completed}addTask(a){a.preventDefault();const b={id:Math.random().toString(16).slice(2),completed:!1,name:document.getElementById("task-name").value,number:document.getElementById("task-num").value,current:0,note:document.getElementById("task-note").value};allTasks.push(b),this.renderTask(b),document.getElementById("taskform").reset();const c=document.getElementById("welcome-message");c&&c.remove(),closeModal()}}customElements.define("task-list",TaskList),window.onbeforeunload=function(){localStorage.setItem("allTasks",JSON.stringify(allTasks))},window.onload=()=>{function a(){for(let a=0;a<c.length;a++){const b=c[a].getBoundingClientRect(),d=b.top,e=b.bottom;c[a].yPos=d+(e-d)/2}}function b(b,d){a();let e,f=d;for(let a=0;a<c.length;a++)c[a].yPos<b&&(e=c[a],f=a+1);return"undefined"==typeof e&&(f=0),f}document.getElementById("taskform").addEventListener("submit",a=>document.getElementById("main-container").addTask(a));const c=dropzone.getElementsByClassName("taskNode");let d,e=0,f=0,g=!1;dropzone.addEventListener("dragstart",a=>{e=b(a.clientY,e),d=a.target,g=d.checkmark.checked},!1),dropzone.addEventListener("dragover",a=>{a.preventDefault(),f=b(a.clientY,f),e!==f&&(e=b(a.clientY,e),dropzone.insertBefore(d,dropzone.children[f]),d.checkmark.checked=g);const h=[];for(let b=0;b<c.length;b++){const a=c[b].id,d=allTasks.find(b=>b.id===a);h.push(d)}allTasks=h}),dropzone.addEventListener("drop",a=>{a.preventDefault()})};function showModalTask(a){document.getElementById("play-modal").style.display="block";const b=a.target.getRootNode().host;document.getElementById("timer-name").innerText=b.taskName;const c=allTasks.findIndex(a=>a.id===b.id);document.getElementById("timer-note").innerText=allTasks[c].note;const d=b.id;localStorage.setItem("currentTask",JSON.stringify(d))}function editTask(a){document.getElementById("edit-modal").style.display="block";const b=a.target.getRootNode().host.id,c=allTasks.findIndex(a=>a.id===b);document.getElementById("edit-save-btn").addEventListener("click",()=>{allTasks[c].name=document.getElementById("edit-name").value,allTasks[c].number=document.getElementById("edit-num").value,allTasks[c].note=document.getElementById("edit-note").value})}function deleteTask(a){document.getElementById("delete-modal").style.display="block";const b=a.target,c=b.getRootNode().host,d=c.taskName;document.getElementById("task-delete").innerText=`[${d}]`,document.getElementById("confirm-button").addEventListener("click",()=>{for(let a=0;a<allTasks.length;a++)if(allTasks[a].name===d){allTasks.splice(a,1);break}c.remove(),document.getElementById("delete-modal").style.display="none"})}function setCheck(a){const b=a.target.getRootNode().host.id,c=allTasks.findIndex(a=>a.id===b);allTasks[c].completed=!allTasks[c].completed}"undefined"!=typeof exports&&(module.exports={TaskList});