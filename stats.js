let statsList;window.onload=loadHandler;function openInfoModal(){document.getElementById("infoModal").style.display="block"}function closeInfoModal(){document.getElementById("infoModal").style.display="none"}function scrollFunc(){window.scrollTo(0,0)}function resetStats(){statsList=[],localStorage.setItem("statsList",JSON.stringify(statsList)),localStorage.setItem("todayPomo",0),localStorage.setItem("sessionCounter",0),localStorage.setItem("distractCounter",0),document.getElementById("todayPomos").innerText=0,document.getElementById("todayAvgDistractions").innerText=0,document.getElementById("todaySuccess").innerText="0%",document.getElementById("weekPomos").innerText=0,document.getElementById("weekAvgDistractions").innerText=0,document.getElementById("weekSuccess").innerText="0%",document.getElementById("monthPomos").innerText=0,document.getElementById("monthAvgDistractions").innerText=0,document.getElementById("monthSuccess").innerText="0%"}function loadHandler(){const a=localStorage.getItem("statsList");statsList=a&&"undefined"!==a?JSON.parse(a):[];const b=new Date,c=+localStorage.getItem("todayPomo"),d=+localStorage.getItem("sessionCounter"),e=+localStorage.getItem("distractCounter");let f=+localStorage.getItem("todayPomo"),g=+localStorage.getItem("sessionCounter"),h=+localStorage.getItem("distractCounter"),j=+localStorage.getItem("todayPomo"),k=+localStorage.getItem("sessionCounter"),l=+localStorage.getItem("distractCounter");for(let a=0;a<statsList.length;a++){const c=new Date(statsList[a].day),d=statsList[a].pomoCount,e=statsList[a].distractions,i=statsList[a].completedPomos,m=Math.floor(Math.abs(b-c)/86400000);0<m&&7>=m&&(f+=d,h+=e,g+=i),0<m&&31>m&&(j+=d,l+=e,k+=i),30<m&&statsList.splice(a,1)}document.getElementById("todayPomos").innerText=d,document.getElementById("todayAvgDistractions").innerText=0===d?"0":(e/d).toFixed(1),document.getElementById("todaySuccess").innerText=0===d?"0%":`${(100*d/c).toFixed(2)}%`,document.getElementById("weekPomos").innerText=g,document.getElementById("weekAvgDistractions").innerText=0===g?0:(h/g).toFixed(1),document.getElementById("weekSuccess").innerText=0===g?"0%":`${(100*g/f).toFixed(2)}%`,document.getElementById("monthPomos").innerText=k,document.getElementById("monthAvgDistractions").innerText=0===k?0:(l/k).toFixed(1),document.getElementById("monthSuccess").innerText=0===k?"0%":`${(100*k/j).toFixed(2)}%`,window.onclick=eventCloseStatsModal,window.onbeforeunload=unloadHandler}function eventCloseStatsModal(a){a.target===document.getElementById("infoModal")&&(document.getElementById("infoModal").style.display="none")}function unloadHandler(){localStorage.setItem("statsList",JSON.stringify(statsList))}"undefined"!=typeof exports&&(module.exports={openInfoModal,closeInfoModal,scrollFunc,resetStats,loadHandler,unloadHandler});